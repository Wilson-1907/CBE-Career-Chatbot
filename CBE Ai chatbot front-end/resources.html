<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Educational Resources - CBE Career Guide</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        :root {
            --primary: #5D5CDE;
            --secondary: #FF6B35;
            --accent: #4ECDC4;
            --success: #45B7D1;
            --code-champ-blue: #5D5CDE;
            --code-champ-green: #10B981;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f8f9ff 0%, #e6efff 50%, #f0f8ff 100%);
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
        }
        
        .gradient-code-champ {
            background: linear-gradient(135deg, var(--code-champ-blue) 0%, var(--code-champ-green) 100%);
        }
        
        .btn-primary {
            background-color: var(--primary);
            border-color: var(--primary);
        }
        
        .btn-primary:hover {
            background-color: var(--primary);
            border-color: var(--primary);
            opacity: 0.9;
        }
        
        .text-primary {
            color: var(--primary) !important;
        }
        
        .navbar {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.9) !important;
        }
        
        .resource-card {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.9);
            border: none;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .resource-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
        
        .category-card {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.9);
            border: none;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .category-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }
        
        .university-card {
            transition: all 0.3s ease;
        }
        
        .university-card:hover {
            transform: scale(1.02);
        }
        
        .footer {
            background-color: #212529;
        }

        .code-champ-logo {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            object-fit: cover;
        }
    </style>
</head>
<body>

    <!-- Navigation Header -->
    <nav class="navbar navbar-expand-lg navbar-light sticky-top border-bottom">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="index.html">
                <img src="/images/code champ logo.jpg" 
                     alt="Code Champ Logo" class="code-champ-logo me-3">
                <div>
                    <span class="fw-bold fs-4 text-primary">CBE Career Guide</span>
                    <div class="small text-muted d-none d-sm-block">
                        <span data-en="A Code Champ Project" data-sw="Mradi wa Code Champ">A Code Champ Project</span>
                    </div>
                </div>
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav mx-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="chat.html">
                            <i class="fas fa-comments me-2"></i>
                            <span data-en="AI Chat" data-sw="Mazungumzo ya AI">AI Chat</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="assessment.html">
                            <i class="fas fa-clipboard-list me-2"></i>
                            <span data-en="Assessment" data-sw="Tathmini">Assessment</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="pathways.html">
                            <i class="fas fa-route me-2"></i>
                            <span data-en="Pathways" data-sw="Njia">Pathways</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="careers.html">
                            <i class="fas fa-briefcase me-2"></i>
                            <span data-en="Careers" data-sw="Kazi">Careers</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="scenarios.html">
                            <i class="fas fa-gamepad me-2"></i>
                            <span data-en="Scenarios" data-sw="Hali">Scenarios</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="resources.html">
                            <i class="fas fa-book me-2"></i>
                            <span data-en="Resources" data-sw="Rasilimali">Resources</span>
                        </a>
                    </li>
                </ul>
                
                <div class="d-flex align-items-center">
                    <select id="languageSelect" onchange="changeLanguage()" class="form-select form-select-sm me-3" style="width: auto;">
                        <option value="en">ðŸ‡¬ðŸ‡§ English</option>
                        <option value="sw">ðŸ‡°ðŸ‡ª Kiswahili</option>
                    </select>
                    
                    <div id="authSection" class="d-none">
                        <div id="notLoggedIn" class="d-flex gap-2">
                            <a href="login.html" class="btn btn-outline-primary btn-sm">
                                <i class="fas fa-sign-in-alt me-1"></i>
                                <span data-en="Login" data-sw="Ingia">Login</span>
                            </a>
                            <a href="signup.html" class="btn btn-primary btn-sm">
                                <i class="fas fa-user-plus me-1"></i>
                                <span data-en="Sign Up" data-sw="Jisajili">Sign Up</span>
                            </a>
                        </div>
                        
                        <div id="loggedIn" class="d-none">
                            <div class="dropdown">
                                <button class="btn btn-outline-primary dropdown-toggle btn-sm" type="button" data-bs-toggle="dropdown">
                                    <i class="fas fa-user me-1"></i>
                                    <span id="userName">Student</span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="profile.html">
                                        <i class="fas fa-user me-2"></i>Profile
                                    </a></li>
                                    <li><a class="dropdown-item" href="profile.html">
                                        <i class="fas fa-history me-2"></i>History
                                    </a></li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item text-danger" href="#" onclick="signOut()">
                                        <i class="fas fa-sign-out-alt me-2"></i>Sign Out
                                    </a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container py-4">
        
        <!-- Page Header -->
        <div class="text-center mb-5">
            <h1 class="display-4 fw-bold mb-4">
                <span data-en="Educational Resources" data-sw="Rasilimali za Kielimu">Educational Resources</span>
            </h1>
            <p class="lead text-muted col-lg-8 mx-auto">
                <span data-en="Access comprehensive educational resources, university information, scholarship opportunities, and study materials to support your CBE journey." 
                      data-sw="Pata rasilimali za kielimu za kina, maelezo ya chuo kikuu, fursa za ufadhili, na nyenzo za masomo ili kusaidia safari yako ya CBE.">
                    Access comprehensive educational resources, university information, scholarship opportunities, and study materials to support your CBE journey.
                </span>
            </p>
        </div>

        <!-- Resource Categories -->
        <div class="row g-4 mb-5">
            
            <!-- Universities & Colleges -->
            <div class="col-lg-3 col-md-6">
                <div class="card category-card h-100 rounded-4 p-4 text-center">
                    <div class="bg-primary bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                        <i class="fas fa-university text-primary fs-2"></i>
                    </div>
                    <h4 class="fw-bold mb-3">
                        <span data-en="Universities & Colleges" data-sw="Vyuo Vikuu na Makoleji">Universities & Colleges</span>
                    </h4>
                    <p class="text-muted mb-4">
                        <span data-en="Explore Kenyan universities, admission requirements, and course offerings." 
                              data-sw="Chunguza vyuo vikuu vya Kenya, mahitaji ya kujiunga, na matoleo ya kozi.">
                            Explore Kenyan universities, admission requirements, and course offerings.
                        </span>
                    </p>
                    <button onclick="showSection('universities')" class="btn btn-primary">
                        <span data-en="View Universities" data-sw="Ona Vyuo Vikuu">View Universities</span>
                    </button>
                </div>
            </div>

            <!-- Scholarships & Funding -->
            <div class="col-lg-3 col-md-6">
                <div class="card category-card h-100 rounded-4 p-4 text-center">
                    <div class="bg-success bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                        <i class="fas fa-hand-holding-usd text-success fs-2"></i>
                    </div>
                    <h4 class="fw-bold mb-3">
                        <span data-en="Scholarships & Funding" data-sw="Ufadhili na Ruzuku">Scholarships & Funding</span>
                    </h4>
                    <p class="text-muted mb-4">
                        <span data-en="Find scholarship opportunities and financial aid options for your education." 
                              data-sw="Pata fursa za ufadhili na chaguo za msaada wa kifedha kwa elimu yako.">
                            Find scholarship opportunities and financial aid options for your education.
                        </span>
                    </p>
                    <button onclick="showSection('scholarships')" class="btn btn-success">
                        <span data-en="Find Scholarships" data-sw="Tafuta Ufadhili">Find Scholarships</span>
                    </button>
                </div>
            </div>

            <!-- Study Materials -->
            <div class="col-lg-3 col-md-6">
                <div class="card category-card h-100 rounded-4 p-4 text-center">
                    <div class="bg-info bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                        <i class="fas fa-book-open text-info fs-2"></i>
                    </div>
                    <h4 class="fw-bold mb-3">
                        <span data-en="Study Materials" data-sw="Nyenzo za Masomo">Study Materials</span>
                    </h4>
                    <p class="text-muted mb-4">
                        <span data-en="Access CBE curriculum resources, past papers, and study guides." 
                              data-sw="Pata rasilimali za mtaala wa CBE, karatasi za zamani, na miongozo ya masomo.">
                            Access CBE curriculum resources, past papers, and study guides.
                        </span>
                    </p>
                    <button onclick="showSection('study-materials')" class="btn btn-info">
                        <span data-en="Study Resources" data-sw="Rasilimali za Masomo">Study Resources</span>
                    </button>
                </div>
            </div>

            <!-- Career Tools -->
            <div class="col-lg-3 col-md-6">
                <div class="card category-card h-100 rounded-4 p-4 text-center">
                    <div class="bg-warning bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                        <i class="fas fa-tools text-warning fs-2"></i>
                    </div>
                    <h4 class="fw-bold mb-3">
                        <span data-en="Career Tools" data-sw="Zana za Kazi">Career Tools</span>
                    </h4>
                    <p class="text-muted mb-4">
                        <span data-en="Download CV templates, interview guides, and career planning tools." 
                              data-sw="Pakua vielezo vya wasifu, miongozo ya mahojiano, na zana za kupanga kazi.">
                            Download CV templates, interview guides, and career planning tools.
                        </span>
                    </p>
                    <button onclick="showSection('career-tools')" class="btn btn-warning">
                        <span data-en="Get Tools" data-sw="Pata Zana">Get Tools</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Universities Section -->
        <div id="universities-section" class="mb-5">
            <div class="card resource-card rounded-4 p-4 p-md-5">
                <h2 class="fw-bold mb-4">
                    <i class="fas fa-university text-primary me-3"></i>
                    <span data-en="Kenyan Universities & Colleges" data-sw="Vyuo Vikuu na Makoleji ya Kenya">Kenyan Universities & Colleges</span>
                </h2>
                
                <!-- Filter Tabs -->
                <ul class="nav nav-pills mb-4" id="universityTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="public-unis-tab" data-bs-toggle="pill" data-bs-target="#public-unis" type="button" role="tab">
                            <span data-en="Public Universities" data-sw="Vyuo Vikuu vya Umma">Public Universities</span>
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="private-unis-tab" data-bs-toggle="pill" data-bs-target="#private-unis" type="button" role="tab">
                            <span data-en="Private Universities" data-sw="Vyuo Vikuu vya Binafsi">Private Universities</span>
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="colleges-tab" data-bs-toggle="pill" data-bs-target="#colleges" type="button" role="tab">
                            <span data-en="TVET Colleges" data-sw="Makoleji ya TVET">TVET Colleges</span>
                        </button>
                    </li>
                </ul>

                <div class="tab-content" id="universityTabsContent">
                    <!-- Public Universities -->
                    <div class="tab-pane fade show active" id="public-unis" role="tabpanel">
                        <div class="row g-4" id="publicUniversities">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <!-- Private Universities -->
                    <div class="tab-pane fade" id="private-unis" role="tabpanel">
                        <div class="row g-4" id="privateUniversities">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <!-- TVET Colleges -->
                    <div class="tab-pane fade" id="colleges" role="tabpanel">
                        <div class="row g-4" id="tvetColleges">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Scholarships Section -->
        <div id="scholarships-section" class="mb-5">
            <div class="card resource-card rounded-4 p-4 p-md-5">
                <h2 class="fw-bold mb-4">
                    <i class="fas fa-hand-holding-usd text-success me-3"></i>
                    <span data-en="Scholarship Opportunities" data-sw="Fursa za Ufadhili">Scholarship Opportunities</span>
                </h2>
                
                <div class="row g-4" id="scholarshipsList">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Study Materials Section -->
        <div id="study-materials-section" class="mb-5">
            <div class="card resource-card rounded-4 p-4 p-md-5">
                <h2 class="fw-bold mb-4">
                    <i class="fas fa-book-open text-info me-3"></i>
                    <span data-en="CBE Study Materials" data-sw="Nyenzo za Masomo za CBE">CBE Study Materials</span>
                </h2>
                
                <div class="row g-4" id="studyMaterials">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Career Tools Section -->
        <div id="career-tools-section" class="mb-5">
            <div class="card resource-card rounded-4 p-4 p-md-5">
                <h2 class="fw-bold mb-4">
                    <i class="fas fa-tools text-warning me-3"></i>
                    <span data-en="Career Development Tools" data-sw="Zana za Maendeleo ya Kazi">Career Development Tools</span>
                </h2>
                
                <div class="row g-4" id="careerTools">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>

    </main>

    <!-- University Detail Modal -->
    <div class="modal fade" id="universityModal" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header border-0">
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="universityModalContent">
                    <!-- University details will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer bg-dark text-white py-4 mt-5">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6 text-center text-md-start mb-2 mb-md-0">
                    <p class="mb-0 small text-light-emphasis">
                        Â© 2025 CBE Career Guide. All rights reserved.
                    </p>
                    <p class="mb-0 small text-muted">
                        Code Champ Project - Career Guidance Platform
                    </p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <p class="mb-0 small fw-medium">
                        Developed by <span class="text-warning fw-bold">Code Champ</span> 2025
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Supabase Configuration
        const SUPABASE_URL = 'https://your-project.supabase.co';
        const SUPABASE_ANON_KEY = 'your-anon-key';
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        let currentUser = null;

        // Resource data
        const universitiesData = {
            public: [
                {
                    name: 'University of Nairobi',
                    location: 'Nairobi',
                    established: '1970',
                    website: 'https://www.uonbi.ac.ke',
                    courses: ['Medicine', 'Engineering', 'Law', 'Business', 'Arts'],
                    requirements: 'KCSE C+ (C plus) and above',
                    specialties: ['Medicine', 'Veterinary Medicine', 'Law', 'Engineering'],
                    description: 'Kenya\'s premier university offering a wide range of undergraduate and postgraduate programs.',
                    image: 'https://images.unsplash.com/photo-1562774053-701939374585?w=300&h=200&fit=crop&auto=format'
                },
                {
                    name: 'Jomo Kenyatta University (JKUAT)',
                    location: 'Juja, Kiambu',
                    established: '1994',
                    website: 'https://www.jkuat.ac.ke',
                    courses: ['Engineering', 'Technology', 'Agriculture', 'Health Sciences'],
                    requirements: 'KCSE C+ (C plus) and above',
                    specialties: ['Engineering', 'Agriculture', 'Technology', 'Applied Sciences'],
                    description: 'Leading technological university in Kenya with focus on engineering and applied sciences.',
                    image: 'https://images.unsplash.com/photo-1498243691581-b145c3f54a5a?w=300&h=200&fit=crop&auto=format'
                },
                {
                    name: 'Kenyatta University',
                    location: 'Nairobi',
                    established: '1985',
                    website: 'https://www.ku.ac.ke',
                    courses: ['Education', 'Health Sciences', 'Science', 'Humanities'],
                    requirements: 'KCSE C+ (C plus) and above',
                    specialties: ['Education', 'Health Sciences', 'Environmental Studies'],
                    description: 'Known for teacher training and health sciences programs.',
                    image: 'https://images.unsplash.com/photo-1541829070764-84a7d30dd3f3?w=300&h=200&fit=crop&auto=format'
                }
            ],
            private: [
                {
                    name: 'Strathmore University',
                    location: 'Nairobi',
                    established: '2002',
                    website: 'https://www.strathmore.edu',
                    courses: ['Business', 'Information Technology', 'Law', 'Humanities'],
                    requirements: 'KCSE C+ (C plus) and above',
                    specialties: ['Business', 'IT', 'Actuarial Science'],
                    description: 'Premier private university known for business and technology programs.',
                    image: 'https://images.unsplash.com/photo-1523050854058-8df90110c9f1?w=300&h=200&fit=crop&auto=format'
                },
                {
                    name: 'United States International University (USIU)',
                    location: 'Nairobi',
                    established: '1999',
                    website: 'https://www.usiu.ac.ke',
                    courses: ['Business', 'Psychology', 'International Relations', 'Journalism'],
                    requirements: 'KCSE C+ (C plus) and above',
                    specialties: ['International Business', 'Psychology', 'Journalism'],
                    description: 'American-style liberal arts university with international focus.',
                    image: 'https://images.unsplash.com/photo-1607013251379-e6eecfffe234?w=300&h=200&fit=crop&auto=format'
                }
            ],
            tvet: [
                {
                    name: 'Kenya Polytechnic University College',
                    location: 'Nairobi',
                    established: '1961',
                    website: 'https://www.kenyapolytechnic.ac.ke',
                    courses: ['Engineering', 'ICT', 'Business', 'Applied Sciences'],
                    requirements: 'KCSE D+ (D plus) and above',
                    specialties: ['Technical Training', 'Applied Engineering', 'ICT'],
                    description: 'Leading technical training institution in Kenya.',
                    image: 'https://images.unsplash.com/photo-1581092918056-0c4c3acd3789?w=300&h=200&fit=crop&auto=format'
                },
                {
                    name: 'Mombasa Polytechnic University College',
                    location: 'Mombasa',
                    established: '1972',
                    website: 'https://www.mombasapolytechnic.ac.ke',
                    courses: ['Marine Engineering', 'Building Technology', 'Electrical Engineering'],
                    requirements: 'KCSE D+ (D plus) and above',
                    specialties: ['Marine Technology', 'Port Management', 'Engineering'],
                    description: 'Coastal technical institution specializing in marine and engineering programs.',
                    image: 'https://images.unsplash.com/photo-1586348943529-beaae6c28db9?w=300&h=200&fit=crop&auto=format'
                }
            ]
        };

        const scholarshipsData = [
            {
                name: 'HELB Loans and Bursaries',
                provider: 'Higher Education Loans Board',
                amount: 'Variable based on need',
                deadline: 'Ongoing applications',
                requirements: 'Kenyan citizen, KCSE C+ and above, demonstrated financial need',
                description: 'Government student loans and bursaries for higher education.',
                website: 'https://www.helb.co.ke',
                type: 'Government'
            },
            {
                name: 'Mastercard Foundation Scholars Program',
                provider: 'Mastercard Foundation',
                amount: 'Full scholarship including living expenses',
                deadline: 'December 31st annually',
                requirements: 'Academic excellence, leadership potential, financial need',
                description: 'Comprehensive scholarship for African students including mentorship.',
                website: 'https://mastercardfdn.org',
                type: 'International'
            },
            {
                name: 'Kenya Education Fund (KEF)',
                provider: 'Kenya Education Fund',
                amount: 'Up to $2,000 per year',
                deadline: 'March 31st annually',
                requirements: 'Demonstrated academic ability and financial need',
                description: 'Supports Kenyan students pursuing higher education.',
                website: 'https://www.kenyaeducationfund.org',
                type: 'Private'
            },
            {
                name: 'Aga Khan Foundation Scholarship',
                provider: 'Aga Khan Foundation',
                amount: '50% grant, 50% loan',
                deadline: 'March 31st annually',
                requirements: 'Academic merit, financial need, from developing countries',
                description: 'Scholarships for outstanding students from developing countries.',
                website: 'https://www.akdn.org',
                type: 'International'
            }
        ];

        const studyMaterialsData = [
            {
                title: 'CBE Grade 10 Mathematics',
                type: 'PDF Guide',
                subject: 'Mathematics',
                grade: 'Grade 10',
                size: '2.5 MB',
                description: 'Comprehensive mathematics guide covering all CBE topics for Grade 10.',
                downloadUrl: '#'
            },
            {
                title: 'KCSE Physics Past Papers',
                type: 'PDF Collection',
                subject: 'Physics',
                grade: 'Grade 12',
                size: '15.2 MB',
                description: 'Collection of KCSE Physics past papers from 2015-2024.',
                downloadUrl: '#'
            },
            {
                title: 'CBE English Study Guide',
                type: 'Interactive Guide',
                subject: 'English',
                grade: 'All Grades',
                size: '5.8 MB',
                description: 'Complete English language study guide with exercises.',
                downloadUrl: '#'
            },
            {
                title: 'Chemistry Practical Handbook',
                type: 'PDF Guide',
                subject: 'Chemistry',
                grade: 'Grade 11-12',
                size: '8.3 MB',
                description: 'Laboratory practical handbook for chemistry students.',
                downloadUrl: '#'
            },
            {
                title: 'GRADE 10 Curriculum Guide',
                type: 'link',
                subject: 'curriculum ',
                grade: 'Grade 10',
                size: 'N/A',
                description: 'Official CBE curriculum guide for Grade 10 students.',
                Website: 'https://kcid.go.ke/curriculum/grade-10-curriculum-guide',

              },
              {
                title: 'Career Booklet',
                type: 'PDF Guide',
                subject: 'Career Guidance',
                grade: 'All Grades',
                description: 'Comprehensive career guidance booklet for students.',
                downloadUrl: '#'
              },
              {
                title: 'Career Assessment Tools',
                type: 'Online Resources',
                subject: 'Career Guidance',
                grade: 'All Grades',
                description: 'Various tools and quizzes to help students assess their career interests.',
                downloadUrl: '#'
              },
              {
                title:'grade twelve guide',
                 type: 'PDF Guide',
                 subject: 'curriculum ',
                 grade: 'Grade 12',
                 size: 'N/A',
                 description: 'Official CBE curriculum guide for Grade 12 students.',
                 Website: 'https://kcid.go.ke/curriculum/grade-12-curriculum-guide',

              },
              {
                title: 'Carreer Pathway wheel',
                type: 'PDF Guide',
                subject: 'Career Guidance',
                grade: 'All Grades',
                description: 'Visual representation of various career pathways available to students.',
                downloadUrl: '#'
              }
        ];

        const careerToolsData = [
            {
                title: 'Professional CV Template',
                type: 'Word Document',
                description: 'Modern CV template optimized for Kenyan job market.',
                size: '245 KB',
                downloadUrl: '#',
                icon: 'fas fa-file-word'
            },
            {
                title: 'Interview Preparation Guide',
                type: 'PDF Guide',
                description: 'Comprehensive guide to ace job interviews in Kenya.',
                size: '1.2 MB',
                downloadUrl: '#',
                icon: 'fas fa-file-pdf'
            },
            {
                title: 'Career Planning Worksheet',
                type: 'Excel Template',
                description: 'Interactive worksheet for career planning and goal setting.',
                size: '156 KB',
                downloadUrl: '#',
                icon: 'fas fa-file-excel'
            },
            {
                title: 'LinkedIn Profile Optimizer',
                type: 'PDF Guide',
                description: 'Tips and templates for creating a standout LinkedIn profile.',
                size: '892 KB',
                downloadUrl: '#',
                icon: 'fas fa-file-pdf'
            }
        ];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            checkAuthState();
            initializeLanguage();
            loadAllResources();
        });

        function initializeLanguage() {
            const languageSelect = document.getElementById('languageSelect');
            const savedLanguage = localStorage.getItem('selectedLanguage') || 'en';
            languageSelect.value = savedLanguage;
            changeLanguage();
        }

        async function checkAuthState() {
            const { data: { session } } = await supabase.auth.getSession();
            if (session) {
                currentUser = session.user;
                showLoggedInState();
            } else {
                showLoggedOutState();
            }
        }

        function showLoggedInState() {
            document.getElementById('notLoggedIn').classList.add('d-none');
            document.getElementById('loggedIn').classList.remove('d-none');
            
            if (currentUser.user_metadata?.full_name) {
                document.getElementById('userName').textContent = currentUser.user_metadata.full_name;
            }
        }

        function showLoggedOutState() {
            document.getElementById('notLoggedIn').classList.remove('d-none');
            document.getElementById('loggedIn').classList.add('d-none');
        }

        async function signOut() {
            try {
                const { error } = await supabase.auth.signOut();
                if (error) throw error;
                
                currentUser = null;
                showLoggedOutState();
                
            } catch (error) {
                console.error('Sign out error:', error);
            }
        }

        function loadAllResources() {
            loadUniversities();
            loadScholarships();
            loadStudyMaterials();
            loadCareerTools();
        }

        function loadUniversities() {
            // Load public universities
            const publicContainer = document.getElementById('publicUniversities');
            publicContainer.innerHTML = universitiesData.public.map(uni => createUniversityCard(uni)).join('');

            // Load private universities
            const privateContainer = document.getElementById('privateUniversities');
            privateContainer.innerHTML = universitiesData.private.map(uni => createUniversityCard(uni)).join('');

            // Load TVET colleges
            const tvetContainer = document.getElementById('tvetColleges');
            tvetContainer.innerHTML = universitiesData.tvet.map(uni => createUniversityCard(uni)).join('');
        }

        function createUniversityCard(university) {
            return `
                <div class="col-md-6 col-lg-4">
                    <div class="card university-card h-100 border-0 shadow-sm" onclick="showUniversityDetails('${university.name}')">
                        <img src="${university.image}" class="card-img-top" alt="${university.name}" style="height: 200px; object-fit: cover;">
                        <div class="card-body">
                            <h5 class="card-title text-primary">${university.name}</h5>
                            <p class="card-text text-muted small mb-2">
                                <i class="fas fa-map-marker-alt me-1"></i>
                                ${university.location} â€¢ Est. ${university.established}
                            </p>
                            <p class="card-text">${university.description}</p>
                            <div class="mt-auto">
                                <div class="d-flex flex-wrap gap-1 mb-3">
                                    ${university.specialties.slice(0, 2).map(specialty => `
                                        <span class="badge bg-primary bg-opacity-10 text-primary">${specialty}</span>
                                    `).join('')}
                                </div>
                                <small class="text-success fw-bold">${university.requirements}</small>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function showUniversityDetails(universityName) {
            // Find university data
            let university = null;
            const allUniversities = [...universitiesData.public, ...universitiesData.private, ...universitiesData.tvet];
            university = allUniversities.find(uni => uni.name === universityName);
            
            if (!university) return;

            const modalContent = document.getElementById('universityModalContent');
            modalContent.innerHTML = `
                <div class="text-center mb-4">
                    <img src="${university.image}" class="rounded-3 mb-3" alt="${university.name}" style="width: 100%; max-width: 400px; height: 200px; object-fit: cover;">
                    <h1 class="fw-bold text-primary">${university.name}</h1>
                    <p class="lead text-muted">${university.description}</p>
                </div>

                <div class="row g-4 mb-4">
                    <div class="col-md-6">
                        <div class="card border-0 bg-light">
                            <div class="card-body">
                                <h6 class="fw-bold text-primary mb-3">
                                    <i class="fas fa-info-circle me-2"></i>
                                    Basic Information
                                </h6>
                                <p class="mb-2"><strong>Location:</strong> ${university.location}</p>
                                <p class="mb-2"><strong>Established:</strong> ${university.established}</p>
                                <p class="mb-2"><strong>Website:</strong> <a href="${university.website}" target="_blank" class="text-primary">${university.website}</a></p>
                                <p class="mb-0"><strong>Entry Requirements:</strong> ${university.requirements}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="card border-0 bg-light">
                            <div class="card-body">
                                <h6 class="fw-bold text-primary mb-3">
                                    <i class="fas fa-graduation-cap me-2"></i>
                                    Courses Offered
                                </h6>
                                <div class="d-flex flex-wrap gap-2">
                                    ${university.courses.map(course => `
                                        <span class="badge bg-primary bg-opacity-10 text-primary p-2">${course}</span>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card border-0 bg-light mb-4">
                    <div class="card-body">
                        <h6 class="fw-bold text-primary mb-3">
                            <i class="fas fa-star me-2"></i>
                            Areas of Specialization
                        </h6>
                        <div class="row g-2">
                            ${university.specialties.map(specialty => `
                                <div class="col-md-6">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-check-circle text-success me-2"></i>
                                        <span>${specialty}</span>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>

                <div class="text-center">
                    <div class="d-flex flex-column flex-md-row gap-3 justify-content-center">
                        <a href="${university.website}" target="_blank" class="btn btn-primary">
                            <i class="fas fa-external-link-alt me-2"></i>
                            Visit Official Website
                        </a>
                        <a href="chat.html" class="btn btn-outline-primary">
                            <i class="fas fa-comments me-2"></i>
                            Ask AI About This University
                        </a>
                    </div>
                </div>
            `;
            
            const modal = new bootstrap.Modal(document.getElementById('universityModal'));
            modal.show();

            // Track resource view
            if (currentUser) {
                trackResourceView('university', universityName);
            }
        }

        function loadScholarships() {
            const container = document.getElementById('scholarshipsList');
            container.innerHTML = scholarshipsData.map(scholarship => `
                <div class="col-md-6 col-lg-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-start mb-3">
                                <h5 class="card-title text-success">${scholarship.name}</h5>
                                <span class="badge bg-${getTypeColor(scholarship.type)}">${scholarship.type}</span>
                            </div>
                            <p class="card-text text-muted small mb-2">
                                <i class="fas fa-building me-1"></i>
                                ${scholarship.provider}
                            </p>
                            <p class="card-text">${scholarship.description}</p>
                            <div class="mt-auto">
                                <div class="mb-3">
                                    <strong class="text-success">${scholarship.amount}</strong>
                                </div>
                                <div class="mb-3">
                                    <small class="text-warning">
                                        <i class="fas fa-calendar me-1"></i>
                                        Deadline: ${scholarship.deadline}
                                    </small>
                                </div>
                                <button onclick="showScholarshipDetails('${scholarship.name}')" class="btn btn-outline-success btn-sm w-100">
                                    <i class="fas fa-info-circle me-1"></i>
                                    View Details
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function getTypeColor(type) {
            const colors = {
                'Government': 'primary',
                'International': 'info',
                'Private': 'warning'
            };
            return colors[type] || 'secondary';
        }

        function showScholarshipDetails(scholarshipName) {
            const scholarship = scholarshipsData.find(s => s.name === scholarshipName);
            if (!scholarship) return;

            // Create a simple alert with scholarship details
            const details = `
Scholarship: ${scholarship.name}
Provider: ${scholarship.provider}
Amount: ${scholarship.amount}
Deadline: ${scholarship.deadline}

Requirements: ${scholarship.requirements}

Description: ${scholarship.description}

Website: ${scholarship.website}
            `;
            
            // Custom modal would be better, but for now using alert
            alert(details);

            if (currentUser) {
                trackResourceView('scholarship', scholarshipName);
            }
        }

        function loadStudyMaterials() {
            const container = document.getElementById('studyMaterials');
            container.innerHTML = studyMaterialsData.map(material => `
                <div class="col-md-6 col-lg-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body">
                            <div class="d-flex align-items-start mb-3">
                                <div class="bg-info bg-opacity-10 rounded-3 p-2 me-3">
                                    <i class="fas fa-file-pdf text-info"></i>
                                </div>
                                <div class="flex-grow-1">
                                    <h5 class="card-title">${material.title}</h5>
                                    <p class="card-text text-muted small">
                                        ${material.subject} â€¢ ${material.grade} â€¢ ${material.size}
                                    </p>
                                </div>
                            </div>
                            <p class="card-text">${material.description}</p>
                            <div class="mt-auto">
                                <button onclick="downloadResource('${material.title}')" class="btn btn-info btn-sm w-100">
                                    <i class="fas fa-download me-2"></i>
                                    Download ${material.type}
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function loadCareerTools() {
            const container = document.getElementById('careerTools');
            container.innerHTML = careerToolsData.map(tool => `
                <div class="col-md-6 col-lg-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body">
                            <div class="d-flex align-items-start mb-3">
                                <div class="bg-warning bg-opacity-10 rounded-3 p-2 me-3">
                                    <i class="${tool.icon} text-warning"></i>
                                </div>
                                <div class="flex-grow-1">
                                    <h5 class="card-title">${tool.title}</h5>
                                    <p class="card-text text-muted small">
                                        ${tool.type} â€¢ ${tool.size}
                                    </p>
                                </div>
                            </div>
                            <p class="card-text">${tool.description}</p>
                            <div class="mt-auto">
                                <button onclick="downloadResource('${tool.title}')" class="btn btn-warning btn-sm w-100">
                                    <i class="fas fa-download me-2"></i>
                                    Download Template
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function downloadResource(resourceName) {
            // Simulate download
            showSuccessMessage(`${resourceName} download started!`);
            
            if (currentUser) {
                trackResourceView('download', resourceName);
            }
        }

        async function trackResourceView(type, resourceName) {
            try {
                await supabase
                    .from('user_activities')
                    .insert([
                        {
                            user_id: currentUser.id,
                            activity_type: 'resource_viewed',
                            activity_data: { 
                                type: type,
                                name: resourceName 
                            },
                            timestamp: new Date().toISOString()
                        }
                    ]);
            } catch (error) {
                console.error('Error tracking resource view:', error);
            }
        }

        function showSection(sectionName) {
            const section = document.getElementById(`${sectionName}-section`);
            if (section) {
                section.scrollIntoView({ behavior: 'smooth' });
            }
        }

        function showSuccessMessage(message) {
            const toastContainer = document.createElement('div');
            toastContainer.className = 'position-fixed top-0 end-0 p-3';
            toastContainer.style.zIndex = '1050';
            toastContainer.innerHTML = `
                <div class="toast align-items-center text-white bg-success border-0" role="alert">
                    <div class="d-flex">
                        <div class="toast-body">
                            <i class="fas fa-check-circle me-2"></i>${message}
                        </div>
                        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
                    </div>
                </div>
            `;
            document.body.appendChild(toastContainer);
            
            const toast = new bootstrap.Toast(toastContainer.querySelector('.toast'));
            toast.show();
            
            setTimeout(() => {
                toastContainer.remove();
            }, 3000);
        }

        function changeLanguage() {
            const select = document.getElementById('languageSelect');
            const currentLanguage = select.value;
            localStorage.setItem('selectedLanguage', currentLanguage);
            
            document.querySelectorAll('[data-en]').forEach(element => {
                if (currentLanguage === 'en') {
                    element.textContent = element.getAttribute('data-en');
                } else {
                    element.textContent = element.getAttribute('data-sw');
                }
            });
        }

        // Show auth section after page load
        document.getElementById('authSection').classList.remove('d-none');
    </script>

</body>

</html>
